ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 5)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 50)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 35)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
ggplot(aes(x = df_comb, fill = result), data = df) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist (w/ result')
ggplot(aes(x = loan_amnt, fill = result), data = df_comb) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist (w/ result')
ggplot(aes(x = loan_amnt, fill = result), data = df_comb) +
geom_histogram()+
ggtitle('loan amount hist (w/ result')
ggplot(aes(x = loan_amnt, fill = result), data = df_comb) +
geom_histogram(bins = 8)+
ggtitle('loan amount hist (w/ result')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
mean(df)
mean(df)
mean(df$loan_amnt)
median(df$loan_amnt)
apprevoed_median <- median(df$loan_amnt)
approved_sd <- sd(df$loan_amnt)
lower_range <- approved_mean - approved_sd
upper_range <- approved_mean + approved_sd
test_range <- subset(df, loan_amnt >= round(lower_range+500) & loan_amnt <= round(upper_range-500))
nrow(test_range)/nrow(df)
appreved_median <- median(df$loan_amnt)
lower_range <- approved_median - approved_sd
upper_range <- approved_median + approved_sd
test_range <- subset(df, loan_amnt >= round(lower_range+500) & loan_amnt <= round(upper_range-500))
approved_median <- median(df$loan_amnt)
approved_sd <- sd(df$loan_amnt)
lower_range <- approved_median - approved_sd
upper_range <- approved_median + approved_sd
test_range <- subset(df, loan_amnt >= round(lower_range+500) & loan_amnt <= round(upper_range-500))
nrow(test_range)/nrow(df)
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
g1 <- ggplot(aes(x =emp_length), data = subset(df_comb, df_comb$result == 'approved')) +
geom_histogram(stat = 'count') +
ggtitle('approved requests')
g2 <- ggplot(aes(x =emp_length), data = subset(df_comb, df_comb$result == 'rejected')) +
geom_histogram(stat = 'count') +
ggtitle('rejected requests')
g3 <- ggplot(aes(x =emp_length, y = loan_amnt), data = subset(df_comb, df_comb$result == 'approved')) +
geom_boxplot() +
ggtitle('approved requests')
g4 <- ggplot(aes(x =emp_length, y = loan_amnt), data = subset(df_comb, df_comb$result == 'rejected')) +
geom_boxplot() +
ggtitle('rejected requests')
grid.arrange(g1, g2, g3, g4, ncol=2)
ggplot(aes(x =emp_length, y = ratio, fill = result), data = app_rates) +
geom_bar(stat = 'identity') +
ggtitle('approved v rejected rates')
library(ggplot2)
library(GGally)
library(gridExtra)
library(tidyverse)
ggplot(aes(x = loan_amnt, fill = result), data = df_comb) +
geom_histogram(bins = 8)+
ggtitle('loan amount hist (w/ result')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
grid.arrange(j1, j2, ncols = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
grid.arrange(j1, j2, ncols = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncols = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncols = 2)
grid.arrange(j1, j2, ncol = 1)
g1 <- ggplot(aes(x =emp_length), data = subset(df_comb, df_comb$result == 'approved')) +
geom_histogram(stat = 'count') +
ggtitle('approved requests')
g2 <- ggplot(aes(x =emp_length), data = subset(df_comb, df_comb$result == 'rejected')) +
geom_histogram(stat = 'count') +
ggtitle('rejected requests')
g3 <- ggplot(aes(x =emp_length, y = loan_amnt), data = subset(df_comb, df_comb$result == 'approved')) +
geom_boxplot() +
ggtitle('approved requests')
g4 <- ggplot(aes(x =emp_length, y = loan_amnt), data = subset(df_comb, df_comb$result == 'rejected')) +
geom_boxplot() +
ggtitle('rejected requests')
grid.arrange(g1, g2, g3, g4, ncol=2)
ggplot(aes(x =emp_length, y = ratio, fill = result), data = app_rates) +
geom_bar(stat = 'identity') +
ggtitle('approved v rejected rates')
min(test_range$loan_amnt)
max(test_range$loan_amnt)
range_rej <-subset(df_rej, loan_amnt >= 4475 & loan_amnt <= 19525)
View(df_rej)
range_rej <-subset(df_rej, Amount.Requested >= 4475 & Amount.Requested <= 19525)
View(range_rej)
ggplot(aes(x = Application.Date, y = Amount.Requested), data = range_rej) +
geom_point(stat = 'identity')
ggplot(aes(x = Amount.Requested), data = range_rej) +
geom_histogram() +
ggtitle('amount requested')
ggplot(aes(x = Employment.Length), data = range_rej) +
geom_histogram() +
ggtitle('Emp Length')
ggplot(aes(x = Employment.Length), data = range_rej) +
geom_histogram(stat = 'count') +
ggtitle('Emp Length')
ggplot(aes(x = Amount.Requested, y = Employment.Length), data = range_rej) +
geom_point(alpha = 0.1) +
ggtitle('amount by length')
ggplot(aes(x = Employment.Length, y = Amount.Requested), data = range_rej) +
geom_point(alpha = 0.1) +
ggtitle('amount by length')
range_rej$Debt.To.Income.Ratio <- substr(range_rej$Debt.To.Income.Ratio, 1,
nchar(as.character(range_rej$Debt.To.Income.Ratio)) - 1)
range_rej$Debt.To.Income.Ratio <- as.numeric(range_rej$Debt.To.Income.Ratio)
ggplot(aes(x = Debt.To.Income.Ratio), data = range_rej) +
geom_histogram() +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0)) +
geom_histogram() +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 9000)) +
geom_histogram() +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 9000)) +
geom_histogram(bins = 100) +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 1000)) +
geom_histogram(bins = 100) +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 500)) +
geom_histogram(bins = 100) +
ggtitle('Debt to inc')
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 100)) +
geom_histogram(bins = 100) +
ggtitle('Debt to inc')
ggplot(aes(x = Risk_Score), data = range_rej) +
geom_point(alpha = 0.1) +
ggtitle('amount by length')
#SCORE
ggplot(aes(x = Risk_Score), data = range_rej) +
geom_histogram() +
ggtitle('amount by length')
#SCORE
ggplot(aes(x = Risk_Score), data = range_rej) +
geom_histogram(bins = 60) +
ggtitle('amount by length')
ggplot(aes(x = Risk_Score), data = range_rej) +
geom_histogram(bins = 100) +
ggtitle('amount by length')
ggplot(aes(x = State), data = range_rej) +
geom_histogram(stat = 'count') +
ggtitle('amount by length')
grid.arrange(j1, j2, ncol = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 100)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 100)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 500)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 500)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 150)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 150)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 80)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 80)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 80)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 60)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
ggplot(aes(x = emp_length), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('amnt hist')
ggplot(aes(x = state), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('state histo')
ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram() +
ggtitle('amnt hist')
ggplot(aes(x = addr_state), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('state histo')
ggplot(aes(x = home_ownership), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('home hist')
ggplot(aes(x = grade), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('grade')
ggplot(aes(x = emp_length), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = term), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('term hist')
ggplot(aes(x = installment), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('install hist')
ggplot(aes(x = installment), data = test_range) +
geom_histogram() +
ggtitle('install hist')
ggplot(aes(x = int_rate), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('int rate hist')
summary(df)
count(unique(df$addr_state))
len(unique(df$addr_state))
nrow(unique(df$addr_state))
unique(df$addr_state)
for (i in 1:ncols(df)){
class(df[i])
}
class(df$loan_amnt)
colnames(df)
class(df$funded_amnt)
class(df$term)
summary(df$term)
class(df$int_rate)
head(df$int_rate)
df$int_rate <- substr(df$int_rate, 1,
nchar(as.character(df$int_rate)) - 1)
df$int_rate <- as.numeric(df$int_rate)
class(df$int_rate)
head(df$int_rate
)
colnameS(df)
coolnames(df)
colnames(df)
class(df$installment)
summary(df$installment)
summary(df$emp_title)
length(unique(df$emp_title))
head(df$emp_title)
summary(df)
colnames(df)
class(df$emp_length)
head(df$emp_length)
df$emp_length <- factor(df$emp_length, levels = c("n/a", "< 1 year", "1 year", "2 years",
"3 years", "4 years", "5 years",
"6 years", "7 years", "8 years",
"9 years", "10+ years"))
df$emp_length <- as.integer(df$emp_length)
class(df$emp_length)
head(df$emp_length)
View(df_reg)
View(df_app)
colnames(df)
class(df$home_ownership)
factors(df$home_ownership)
summary(df$home_ownership)
factors(df$annual_inc)
class(df$annual_inc)
summary(df$annual_inc)
summary(df$title)
colnames(df)
write.csv(sample_sub, file = "D://projects/SNHU/loans/for_python.csv", row.names = FALSE)
#write it out
write.csv(df, file = "D://projects/SNHU/loans/for_python.csv", row.names = FALSE)
summary(df$title)
summary(df$loan_amnt)
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 80)+
ggtitle('loan amount hist')
library(ggplot2)
library(GGally)
library(gridExtra)
library(tidyverse)
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 80)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 40)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 30)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 10)+
ggtitle('loan amount hist')
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist')
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
quartile(df$loan_amnt, prob = c(0.18, 0.83))
quantile(df$loan_amnt, prob = c(0.18, 0.83))
quantile_range <- subset(df, loan_amnt >= 6000 & loan_amnt <= 21000)
nrow(quantile_range)/nrow(df)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist')
j2 <- ggplot(aes(x = loan_amnt), data = quantile_range) +
geom_histogram(bins = 15)+
ggtitle('loan amount hist - 1 SD')
grid.arrange(j1, j2, ncol = 1)
test_range <- subset(df, loan_amnt >= round(lower_range+500) & loan_amnt <= round(upper_range-500))
nrow(quantile_range)/nrow(df)
loan_mad <- mad(df$loan_amnt)
lower_range <- approved_mean - approved_sd
upper_range <- approved_mean + approved_sd
m_lower_range <- approved_median - loan_mad
m_upper_range <- approved_median + loan_mad
mad_range <- subset(df, loan_amnt >= round(m_lower_range) & loan_amnt <= round(m_upper_range))
nrow(mad_range)/nrow(df)
quantile_range <- subset(df, loan_amnt >= round(lower_range+500) & loan_amnt <= round(upper_range-500))
nrow(quantile_range)/nrow(df)
test_range <- subset(df, loan_amnt >= round(lower_range) & loan_amnt <= round(upper_range))
nrow(test_range)/nrow(df)
mad_range <- subset(df, loan_amnt >= round(m_lower_range) & loan_amnt <= round(m_upper_range))
nrow(mad_range)/nrow(df)
quant <- quantile(df$loan_amnt, prob = c(0.18, 0.83))
wuant[1]
quant[1]
quant[1,1]
quantile_range <- subset(df, loan_amnt >= 6000 & loan_amnt <= 21000)
nrow(quantile_range)/nrow(df)
test_range <- subset(df, loan_amnt >= round(lower_range) & loan_amnt <= round(upper_range))
nrow(test_range)/nrow(df)
#PLOTS
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 15)+
ggtitle('loan amount histo')
j2 <- ggplot(aes(x = loan_amnt), data = quantile_range) +
geom_histogram(bins = 15)+
ggtitle('Quantile')
j3 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 15)+
ggtitle('Mean-SD')
j4 <- ggplot(aes(x = loan_amnt), data = mad_range) +
geom_histogram(bins = 15)+
ggtitle('MAD')
grid.arrange(j1, j2, j3, j4, ncol = 2)
j1 <- ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 10)+
ggtitle('loan amount histo')
j2 <- ggplot(aes(x = loan_amnt), data = quantile_range) +
geom_histogram(bins = 10)+
ggtitle('Quantile')
j3 <- ggplot(aes(x = loan_amnt), data = test_range) +
geom_histogram(bins = 10)+
ggtitle('Mean-SD')
j4 <- ggplot(aes(x = loan_amnt), data = mad_range) +
geom_histogram(bins = 10)+
ggtitle('MAD')
grid.arrange(j1, j2, j3, j4, ncol = 2)
ggplot(aes(x = emp_length), data = quantile_range) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = emp_length), data = test_range) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = emp_length), data = df) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = emp_length), data = df) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
df_check <- read.csv('data/Loans_Written.csv')
ggplot(aes(x = emp_length), data = df_check) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
ggplot(aes(x = emp_length), data = quantile_range) +
geom_histogram(stat = 'count') +
ggtitle('length hist')
#check log
df_log <- df
df_log$loan_amnt <- log(df$loan_amnt)
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 10)+
ggtitle('loan amount histo')
library(ggplot2)
library(GGally)
library(gridExtra)
library(tidyverse)
ggplot(aes(x = loan_amnt), data = df) +
geom_histogram(bins = 10)+
ggtitle('loan amount histo')
ggplot(aes(x = loan_amnt), data = df_log) +
geom_histogram(bins = 10)+
ggtitle('loan amount histo')
grid.arrange(j1, j2, j3, j4, ncol = 2)
factors(df)
summary(df$title)
df2 <- read.csv('loans_cleaned.csv')
summary(df2$title)
ggplot(aes(x = title), data = df2) +
geom_histogram(stat = 'count')
library(ggplot2)
ggplot(aes(x = title), data = df2) +
geom_histogram(stat = 'count')
ggplot()
ggplot(aes(x = title, y = loan_amnt), data =df2) +
geom_point(stat = 'identity') +
ggtitle('reason to amount')
ggplot(aes(x = title, y = loan_amnt), data =df2) +
geom_jitter(stat = 'identity', alpha = 0.1) +
ggtitle('reason to amount')
class(df2$int_rate)
ggplot(aes(x = title, y = loan_amnt, color = int_rate), data =df2) +
geom_jitter(stat = 'identity', alpha = 0.1) +
ggtitle('reason to amount')
quantile_range2 <- subset(df2, loan_amnt >= 6000 & loan_amnt <= 21000)
ggplot(aes(x = title, y = loan_amnt, color = int_rate), data =quantile_range2) +
geom_jitter(stat = 'identity', alpha = 0.1) +
ggtitle('reason to amount')
library(gridExtra)
l1 <- ggplot(aes(x = title, y = loan_amnt, color = int_rate), data =df2) +
geom_jitter(stat = 'identity', alpha = 0.1) +
ggtitle('reason to amount')
l2 <- ggplot(aes(x = title, y = loan_amnt, color = int_rate), data =quantile_range2) +
geom_jitter(stat = 'identity', alpha = 0.1) +
ggtitle('reason to amount')
grid.arrange(l1, l2, ncol = 1)
summary(df_rej)
range_rej <-subset(df_rej, Amount.Requested >= 6000 & Amount.Requested <= 21000)
range_rej$Debt.To.Income.Ratio <- substr(range_rej$Debt.To.Income.Ratio, 1,
nchar(as.character(range_rej$Debt.To.Income.Ratio)) - 1)
range_rej$Debt.To.Income.Ratio <- as.numeric(range_rej$Debt.To.Income.Ratio)
ggplot(aes(x = Debt.To.Income.Ratio), data = subset(range_rej, Debt.To.Income.Ratio > 0 &
Debt.To.Income.Ratio < 100)) +
geom_histogram(bins = 100) +
ggtitle('Debt to inc')
summary(range_rej)
class(range_rej$Risk_Score)
class(range_rej$Debt.To.Income.Ratio)
summary(range_rej$State)
class(range_rej$Employment.Length)
range_rej$Employment.Length <- factor(range_rej$Employment.Length, levels = c("n/a", "< 1 year", "1 year", "2 years",
"3 years", "4 years", "5 years",
"6 years", "7 years", "8 years",
"9 years", "10+ years"))
range_rej$Employment.Length <- as.integer(range_rej$Employment.Length)
class(range_rej$Employment.Length)
summary(range_rej$Employment.Length)
write.csv(quantile_range2, file = "D://projects/SNHU/loans/for_vis_approved.csv", row.names = FALSE)
write.csv(range_rej, file = "D://projects/SNHU/loans/for_vis_rejected.csv", row.names = FALSE)
